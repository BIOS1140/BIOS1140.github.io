<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10.2 More on data handling: categorising and joining | R tutorials for the course BIOS1140 at the University of Oslo</title>
  <meta name="description" content="This is a set of R tutorials connected to the course BIOS1140 at the University of Oslo, and are meant as a companion to the book Evolutionary Genetics (Ravinet &amp; Sætre, 2018). They do not assume any prior R knowledge." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="10.2 More on data handling: categorising and joining | R tutorials for the course BIOS1140 at the University of Oslo" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a set of R tutorials connected to the course BIOS1140 at the University of Oslo, and are meant as a companion to the book Evolutionary Genetics (Ravinet &amp; Sætre, 2018). They do not assume any prior R knowledge." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10.2 More on data handling: categorising and joining | R tutorials for the course BIOS1140 at the University of Oslo" />
  
  <meta name="twitter:description" content="This is a set of R tutorials connected to the course BIOS1140 at the University of Oslo, and are meant as a companion to the book Evolutionary Genetics (Ravinet &amp; Sætre, 2018). They do not assume any prior R knowledge." />
  

<meta name="author" content="Original tutorials written by Mark Ravinet. Revamped in 2021 by Even Sletteng Garvang and Solveig Brochmann." />


<meta name="date" content="2022-10-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="advanced-features-of-rstudio.html"/>
<link rel="next" href="lists.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R tutorials for the course BIOS1140</a></li>

<li class="divider"></li>
<li><a href="index.html#preface">Preface<span></span></a>
<ul>
<li><a href="how-to-use-these-tutorials.html#how-to-use-these-tutorials">How to use these tutorials<span></span></a></li>
</ul></li>
<li class="part"><span><b>I Introductory R course<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="ch01.html"><a href="ch01.html"><i class="fa fa-check"></i><b>1</b> Introduction to R<span></span></a>
<ul>
<li><a href="ch01.html#what-to-expect">What to expect<span></span></a></li>
<li class="chapter" data-level="1.1" data-path="start-using-r.html"><a href="start-using-r.html"><i class="fa fa-check"></i><b>1.1</b> Start using R!<span></span></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="start-using-r.html"><a href="start-using-r.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.1.1</b> Install R and Rstudio<span></span></a></li>
<li class="chapter" data-level="1.1.2" data-path="start-using-r.html"><a href="start-using-r.html#getting-familiar-with-r-and-the-console"><i class="fa fa-check"></i><b>1.1.2</b> Getting familiar with R and the console<span></span></a></li>
<li class="chapter" data-level="1.1.3" data-path="start-using-r.html"><a href="start-using-r.html#scripts"><i class="fa fa-check"></i><b>1.1.3</b> Scripts<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-essentials.html"><a href="r-essentials.html"><i class="fa fa-check"></i><b>1.2</b> R essentials<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-essentials.html"><a href="r-essentials.html#assigning-to-objects"><i class="fa fa-check"></i><b>1.2.1</b> Assigning to objects<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="r-essentials.html"><a href="r-essentials.html#vectors"><i class="fa fa-check"></i><b>1.2.2</b> Vectors<span></span></a></li>
<li class="chapter" data-level="1.2.3" data-path="r-essentials.html"><a href="r-essentials.html#strings"><i class="fa fa-check"></i><b>1.2.3</b> Strings<span></span></a></li>
<li class="chapter" data-level="1.2.4" data-path="r-essentials.html"><a href="r-essentials.html#logical"><i class="fa fa-check"></i><b>1.2.4</b> Logical values<span></span></a></li>
<li class="chapter" data-level="1.2.5" data-path="r-essentials.html"><a href="r-essentials.html#functions"><i class="fa fa-check"></i><b>1.2.5</b> Functions<span></span></a></li>
<li class="chapter" data-level="1.2.6" data-path="r-essentials.html"><a href="r-essentials.html#data-frames"><i class="fa fa-check"></i><b>1.2.6</b> Data frames<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="dataimport.html"><a href="dataimport.html"><i class="fa fa-check"></i><b>1.3</b> Data import<span></span></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="dataimport.html"><a href="dataimport.html#data-formats"><i class="fa fa-check"></i><b>1.3.1</b> Data formats<span></span></a></li>
<li class="chapter" data-level="1.3.2" data-path="dataimport.html"><a href="dataimport.html#working-directories"><i class="fa fa-check"></i><b>1.3.2</b> Working directories<span></span></a></li>
<li class="chapter" data-level="1.3.3" data-path="dataimport.html"><a href="dataimport.html#importing"><i class="fa fa-check"></i><b>1.3.3</b> Importing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>1.4</b> Plotting<span></span></a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="plotting.html"><a href="plotting.html#plotting-vectors"><i class="fa fa-check"></i><b>1.4.1</b> Plotting vectors<span></span></a></li>
<li class="chapter" data-level="1.4.2" data-path="plotting.html"><a href="plotting.html#customizing-your-plots"><i class="fa fa-check"></i><b>1.4.2</b> Customizing your plots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="installing-and-loading-packages.html"><a href="installing-and-loading-packages.html"><i class="fa fa-check"></i><b>1.5</b> Installing and loading packages<span></span></a></li>
<li class="chapter" data-level="1.6" data-path="going-further.html"><a href="going-further.html"><i class="fa fa-check"></i><b>1.6</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch02.html"><a href="ch02.html"><i class="fa fa-check"></i><b>2</b> Building on your foundations: going further with R<span></span></a>
<ul>
<li><a href="ch02.html#what-to-expect-1">What to expect<span></span></a></li>
<li class="chapter" data-level="2.1" data-path="intro-to-data-manipulation-with-tidyverse.html"><a href="intro-to-data-manipulation-with-tidyverse.html"><i class="fa fa-check"></i><b>2.1</b> Intro to data manipulation with tidyverse<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-data-manipulation-with-tidyverse.html"><a href="intro-to-data-manipulation-with-tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i><b>2.1.1</b> What is the tidyverse?<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-to-data-manipulation-with-tidyverse.html"><a href="intro-to-data-manipulation-with-tidyverse.html#the-dplyr-package"><i class="fa fa-check"></i><b>2.1.2</b> The dplyr package<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html"><i class="fa fa-check"></i><b>2.2</b> Using dplyr to work with your data<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html#the-pipe"><i class="fa fa-check"></i><b>2.2.1</b> The pipe<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html#selecting-columns-with-select"><i class="fa fa-check"></i><b>2.2.2</b> Selecting columns with <code>select()</code><span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html#filtering-colums-using-filter"><i class="fa fa-check"></i><b>2.2.3</b> Filtering colums using <code>filter()</code><span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html#grouped-summaries-with-group_by-and-summarise"><i class="fa fa-check"></i><b>2.2.4</b> Grouped summaries with <code>group_by()</code> and <code>summarise()</code><span></span></a></li>
<li class="chapter" data-level="2.2.5" data-path="using-dplyr-to-work-with-your-data.html"><a href="using-dplyr-to-work-with-your-data.html#using-everything-weve-learned-in-a-single-pipe-and-a-dplyr-exercise"><i class="fa fa-check"></i><b>2.2.5</b> Using everything we’ve learned in a single pipe, and a <code>dplyr</code> exercise<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="plotting-your-data-with-ggplot2.html"><a href="plotting-your-data-with-ggplot2.html"><i class="fa fa-check"></i><b>2.3</b> Plotting your data with <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="plotting-your-data-with-ggplot2.html"><a href="plotting-your-data-with-ggplot2.html#the-three-things-you-need-in-a-ggplot"><i class="fa fa-check"></i><b>2.3.1</b> The three things you need in a ggplot<span></span></a></li>
<li class="chapter" data-level="2.3.2" data-path="plotting-your-data-with-ggplot2.html"><a href="plotting-your-data-with-ggplot2.html#storing-ggplots-in-objects"><i class="fa fa-check"></i><b>2.3.2</b> Storing ggplots in objects<span></span></a></li>
<li class="chapter" data-level="2.3.3" data-path="plotting-your-data-with-ggplot2.html"><a href="plotting-your-data-with-ggplot2.html#customizing-your-plots-1"><i class="fa fa-check"></i><b>2.3.3</b> Customizing your plots<span></span></a></li>
<li class="chapter" data-level="2.3.4" data-path="plotting-your-data-with-ggplot2.html"><a href="plotting-your-data-with-ggplot2.html#saving-your-plots"><i class="fa fa-check"></i><b>2.3.4</b> Saving your plots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="pivot-longer.html"><a href="pivot-longer.html"><i class="fa fa-check"></i><b>2.4</b> Reshaping data with pivot_longer()<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="pivot-longer.html"><a href="pivot-longer.html#wide-and-long-format"><i class="fa fa-check"></i><b>2.4.1</b> Wide and long format<span></span></a></li>
<li class="chapter" data-level="2.4.2" data-path="pivot-longer.html"><a href="pivot-longer.html#import-example-data"><i class="fa fa-check"></i><b>2.4.2</b> Import example data<span></span></a></li>
<li class="chapter" data-level="2.4.3" data-path="pivot-longer.html"><a href="pivot-longer.html#reshape-the-data"><i class="fa fa-check"></i><b>2.4.3</b> Reshape the data<span></span></a></li>
<li class="chapter" data-level="2.4.4" data-path="pivot-longer.html"><a href="pivot-longer.html#plot-the-data"><i class="fa fa-check"></i><b>2.4.4</b> Plot the data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="study-questions.html"><a href="study-questions.html"><i class="fa fa-check"></i><b>2.5</b> Study questions<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="going-further-1.html"><a href="going-further-1.html"><i class="fa fa-check"></i><b>2.6</b> Going further<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Evolutionary genetics with R<span></span></b></span></li>
<li class="chapter" data-level="3" data-path="ch03.html"><a href="ch03.html"><i class="fa fa-check"></i><b>3</b> Changes in Allele and Genotype Frequency<span></span></a>
<ul>
<li><a href="ch03.html#what-to-expect-2">What to expect<span></span></a></li>
<li class="chapter" data-level="3.1" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html"><i class="fa fa-check"></i><b>3.1</b> R programming: for-loops<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html#motivation-why-loop"><i class="fa fa-check"></i><b>3.1.1</b> Motivation: why loop?<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html#how-a-for-loop-works"><i class="fa fa-check"></i><b>3.1.2</b> How a for-loop works<span></span></a></li>
<li class="chapter" data-level="3.1.3" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html#indexing"><i class="fa fa-check"></i><b>3.1.3</b> Indexing with for-loops<span></span></a></li>
<li class="chapter" data-level="3.1.4" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html#solving-our-problem"><i class="fa fa-check"></i><b>3.1.4</b> Solving our problem<span></span></a></li>
<li class="chapter" data-level="3.1.5" data-path="r-programming-for-loops.html"><a href="r-programming-for-loops.html#storing-values-from-a-for-loop"><i class="fa fa-check"></i><b>3.1.5</b> Storing values from a for-loop<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="evolutionary-biology.html"><a href="evolutionary-biology.html"><i class="fa fa-check"></i><b>3.2</b> Evolutionary biology<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="evolutionary-biology.html"><a href="evolutionary-biology.html#the-hardy-weinberg-model"><i class="fa fa-check"></i><b>3.2.1</b> The Hardy-Weinberg Model<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="evolutionary-biology.html"><a href="evolutionary-biology.html#testing-for-deviations-from-the-hardy-weinberg-expectation"><i class="fa fa-check"></i><b>3.2.2</b> Testing for deviations from the Hardy Weinberg Expectation<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="evolutionary-biology.html"><a href="evolutionary-biology.html#simulating-genetic-drift"><i class="fa fa-check"></i><b>3.2.3</b> Simulating genetic drift<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="study-questions-1.html"><a href="study-questions-1.html"><i class="fa fa-check"></i><b>3.3</b> Study questions<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="going-further-2.html"><a href="going-further-2.html"><i class="fa fa-check"></i><b>3.4</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch04.html"><a href="ch04.html"><i class="fa fa-check"></i><b>4</b> The Theory of Natural Selection<span></span></a>
<ul>
<li><a href="ch04.html#what-to-expect-3">What to expect<span></span></a></li>
<li><a href="ch04.html#getting-started">Getting started<span></span></a></li>
<li class="chapter" data-level="4.1" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html"><i class="fa fa-check"></i><b>4.1</b> R programming: Making custom functions<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#motivation"><i class="fa fa-check"></i><b>4.1.1</b> Motivation<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#function-basics"><i class="fa fa-check"></i><b>4.1.2</b> Function basics<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#a-simple-example"><i class="fa fa-check"></i><b>4.1.3</b> A simple example<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#some-important-function-properties"><i class="fa fa-check"></i><b>4.1.4</b> Some important function properties<span></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#a-slightly-more-useful-example"><i class="fa fa-check"></i><b>4.1.5</b> A slightly more useful example<span></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#example-calculating-genotype-frequencies"><i class="fa fa-check"></i><b>4.1.6</b> Example: calculating genotype frequencies<span></span></a></li>
<li class="chapter" data-level="4.1.7" data-path="r-programming-making-custom-functions.html"><a href="r-programming-making-custom-functions.html#creating-a-function-of-the-drift-simulation"><i class="fa fa-check"></i><b>4.1.7</b> Creating a function of the drift simulation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="evolutionary-biology-fitness.html"><a href="evolutionary-biology-fitness.html"><i class="fa fa-check"></i><b>4.2</b> Evolutionary biology: fitness<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="evolutionary-biology-fitness.html"><a href="evolutionary-biology-fitness.html#understanding-fitness"><i class="fa fa-check"></i><b>4.2.1</b> Understanding fitness<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="evolutionary-biology-fitness.html"><a href="evolutionary-biology-fitness.html#one-locus-model-of-viability-selection"><i class="fa fa-check"></i><b>4.2.2</b> One-locus model of viability selection<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="evolutionary-biology-fitness.html"><a href="evolutionary-biology-fitness.html#over-and-underdominance"><i class="fa fa-check"></i><b>4.2.3</b> Over and underdominance<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="study-questions-2.html"><a href="study-questions-2.html"><i class="fa fa-check"></i><b>4.3</b> Study questions<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="going-further-3.html"><a href="going-further-3.html"><i class="fa fa-check"></i><b>4.4</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch05.html"><a href="ch05.html"><i class="fa fa-check"></i><b>5</b> Detecting Natural Selection<span></span></a>
<ul>
<li><a href="ch05.html#what-to-expect-4">What to expect<span></span></a></li>
<li><a href="ch05.html#getting-started-1">Getting started<span></span></a></li>
<li class="chapter" data-level="5.1" data-path="vectorisation.html"><a href="vectorisation.html"><i class="fa fa-check"></i><b>5.1</b> More on functions: Vectorisation<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="vectorisation.html"><a href="vectorisation.html#the-apply-function"><i class="fa fa-check"></i><b>5.1.1</b> The <code>apply()</code> function<span></span></a></li>
<li class="chapter" data-level="5.1.2" data-path="vectorisation.html"><a href="vectorisation.html#ifelse"><i class="fa fa-check"></i><b>5.1.2</b> The <code>ifelse()</code> function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="understanding-fst---the-fixation-index.html"><a href="understanding-fst---the-fixation-index.html"><i class="fa fa-check"></i><b>5.2</b> Understanding <em>F</em><sub>ST</sub> - the fixation index<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="understanding-fst---the-fixation-index.html"><a href="understanding-fst---the-fixation-index.html#a-worked-example-of-fst-in-humans"><i class="fa fa-check"></i><b>5.2.1</b> A worked example of <em>F</em><sub>ST</sub> in humans<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="understanding-fst---the-fixation-index.html"><a href="understanding-fst---the-fixation-index.html#writing-a-set-of-fst-functions"><i class="fa fa-check"></i><b>5.2.2</b> Writing a set of <em>F</em><sub>ST</sub> functions<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="understanding-fst---the-fixation-index.html"><a href="understanding-fst---the-fixation-index.html#applying-functions-to-matrices-and-data-frames"><i class="fa fa-check"></i><b>5.2.3</b> Applying functions to matrices and data frames<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="visualising-fst-along-a-chromosome.html"><a href="visualising-fst-along-a-chromosome.html"><i class="fa fa-check"></i><b>5.3</b> Visualising <em>F</em><sub>ST</sub> along a chromosome<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="visualising-fst-along-a-chromosome.html"><a href="visualising-fst-along-a-chromosome.html#identifying-outliers-in-our-fst-distribution"><i class="fa fa-check"></i><b>5.3.1</b> Identifying outliers in our <em>F</em><sub>ST</sub> distribution<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="study-questions-3.html"><a href="study-questions-3.html"><i class="fa fa-check"></i><b>5.4</b> Study questions<span></span></a></li>
<li class="chapter" data-level="5.5" data-path="going-further-4.html"><a href="going-further-4.html"><i class="fa fa-check"></i><b>5.5</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch06.html"><a href="ch06.html"><i class="fa fa-check"></i><b>6</b> Multilocus Evolution<span></span></a>
<ul>
<li><a href="ch06.html#what-to-expect-5">What to expect<span></span></a></li>
<li><a href="ch06.html#getting-started-2">Getting started<span></span></a></li>
<li class="chapter" data-level="6.1" data-path="tools-for-investigating-differences-between-groups.html"><a href="tools-for-investigating-differences-between-groups.html"><i class="fa fa-check"></i><b>6.1</b> Tools for investigating differences between groups<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="tools-for-investigating-differences-between-groups.html"><a href="tools-for-investigating-differences-between-groups.html#exploring-group-differences"><i class="fa fa-check"></i><b>6.1.1</b> Exploring group differences<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="tools-for-investigating-differences-between-groups.html"><a href="tools-for-investigating-differences-between-groups.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>6.1.2</b> Analysis of variance (ANOVA)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="performing-a-qtl-analysis-in-bedbugs.html"><a href="performing-a-qtl-analysis-in-bedbugs.html"><i class="fa fa-check"></i><b>6.2</b> Performing a QTL analysis in bedbugs<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="performing-a-qtl-analysis-in-bedbugs.html"><a href="performing-a-qtl-analysis-in-bedbugs.html#bedbugs-pesticide-resistance-and-study-design"><i class="fa fa-check"></i><b>6.2.1</b> Bedbugs, pesticide resistance and study design<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="performing-a-qtl-analysis-in-bedbugs.html"><a href="performing-a-qtl-analysis-in-bedbugs.html#linking-anova-to-our-qtl-analysis"><i class="fa fa-check"></i><b>6.2.2</b> Linking ANOVA to our QTL analysis<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="performing-a-qtl-analysis-in-bedbugs.html"><a href="performing-a-qtl-analysis-in-bedbugs.html#testing-the-same-genotype-phenotype-association-with-anova"><i class="fa fa-check"></i><b>6.2.3</b> Testing the same genotype phenotype association with ANOVA<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="study-questions-4.html"><a href="study-questions-4.html"><i class="fa fa-check"></i><b>6.3</b> Study questions<span></span></a></li>
<li class="chapter" data-level="6.4" data-path="going-further-5.html"><a href="going-further-5.html"><i class="fa fa-check"></i><b>6.4</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch07.html"><a href="ch07.html"><i class="fa fa-check"></i><b>7</b> Inferring Evolutionary Processes from Sequence Data<span></span></a>
<ul>
<li><a href="ch07.html#what-to-expect-6">What to expect<span></span></a></li>
<li><a href="ch07.html#getting-started-3">Getting started<span></span></a></li>
<li class="chapter" data-level="7.1" data-path="working-with-dna-sequence-data.html"><a href="working-with-dna-sequence-data.html"><i class="fa fa-check"></i><b>7.1</b> Working with DNA sequence data<span></span></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="working-with-dna-sequence-data.html"><a href="working-with-dna-sequence-data.html#reading-sequence-data-into-r."><i class="fa fa-check"></i><b>7.1.1</b> Reading sequence data into R.<span></span></a></li>
<li class="chapter" data-level="7.1.2" data-path="working-with-dna-sequence-data.html"><a href="working-with-dna-sequence-data.html#exploring-dna-sequence-data"><i class="fa fa-check"></i><b>7.1.2</b> Exploring DNA sequence data<span></span></a></li>
<li class="chapter" data-level="7.1.3" data-path="working-with-dna-sequence-data.html"><a href="working-with-dna-sequence-data.html#calculating-basic-sequence-statistics"><i class="fa fa-check"></i><b>7.1.3</b> Calculating basic sequence statistics<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="working-with-a-larger-dataset.html"><a href="working-with-a-larger-dataset.html"><i class="fa fa-check"></i><b>7.2</b> Working with a larger dataset<span></span></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="working-with-a-larger-dataset.html"><a href="working-with-a-larger-dataset.html#sample-size-and-sequence-statistics"><i class="fa fa-check"></i><b>7.2.1</b> Sample size and sequence statistics<span></span></a></li>
<li class="chapter" data-level="7.2.2" data-path="working-with-a-larger-dataset.html"><a href="working-with-a-larger-dataset.html#inferring-evolutionary-processes-using-tajimas-d"><i class="fa fa-check"></i><b>7.2.2</b> Inferring evolutionary processes using Tajima’s <em>D</em><span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="calculating-statistics-at-the-whole-genome-level.html"><a href="calculating-statistics-at-the-whole-genome-level.html"><i class="fa fa-check"></i><b>7.3</b> Calculating statistics at the whole genome level<span></span></a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="calculating-statistics-at-the-whole-genome-level.html"><a href="calculating-statistics-at-the-whole-genome-level.html#reading-in-variant-data"><i class="fa fa-check"></i><b>7.3.1</b> Reading in variant data<span></span></a></li>
<li class="chapter" data-level="7.3.2" data-path="calculating-statistics-at-the-whole-genome-level.html"><a href="calculating-statistics-at-the-whole-genome-level.html#calculating-nucleotide-diversity-statistics"><i class="fa fa-check"></i><b>7.3.2</b> Calculating nucleotide diversity statistics<span></span></a></li>
<li class="chapter" data-level="7.3.3" data-path="calculating-statistics-at-the-whole-genome-level.html"><a href="calculating-statistics-at-the-whole-genome-level.html#visualising-nucleotide-diversity-along-the-chromosome"><i class="fa fa-check"></i><b>7.3.3</b> Visualising nucleotide diversity along the chromosome<span></span></a></li>
<li class="chapter" data-level="7.3.4" data-path="calculating-statistics-at-the-whole-genome-level.html"><a href="calculating-statistics-at-the-whole-genome-level.html#performing-a-sliding-window-analysis"><i class="fa fa-check"></i><b>7.3.4</b> Performing a sliding window analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="study-questions-5.html"><a href="study-questions-5.html"><i class="fa fa-check"></i><b>7.4</b> Study questions<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="going-further-6.html"><a href="going-further-6.html"><i class="fa fa-check"></i><b>7.5</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch08.html"><a href="ch08.html"><i class="fa fa-check"></i><b>8</b> Speciation Genomics<span></span></a>
<ul>
<li><a href="ch08.html#what-to-expect-7">What to expect<span></span></a></li>
<li><a href="ch08.html#getting-started-4">Getting started<span></span></a></li>
<li class="chapter" data-level="8.1" data-path="visualizing-complex-data.html"><a href="visualizing-complex-data.html"><i class="fa fa-check"></i><b>8.1</b> Visualizing complex data<span></span></a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="visualizing-complex-data.html"><a href="visualizing-complex-data.html#faceting"><i class="fa fa-check"></i><b>8.1.1</b> Faceting<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="returning-to-the-sparrow-dataset.html"><a href="returning-to-the-sparrow-dataset.html"><i class="fa fa-check"></i><b>8.2</b> Returning to the sparrow dataset<span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="returning-to-the-sparrow-dataset.html"><a href="returning-to-the-sparrow-dataset.html#reading-in-the-sparrow-vcf"><i class="fa fa-check"></i><b>8.2.1</b> Reading in the sparrow vcf<span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="returning-to-the-sparrow-dataset.html"><a href="returning-to-the-sparrow-dataset.html#examining-the-variant-data"><i class="fa fa-check"></i><b>8.2.2</b> Examining the variant data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="setting-up-sliding-windows.html"><a href="setting-up-sliding-windows.html"><i class="fa fa-check"></i><b>8.3</b> Setting up sliding windows<span></span></a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="setting-up-sliding-windows.html"><a href="setting-up-sliding-windows.html#calculating-sliding-window-estimates-of-nucleotide-diversity-and-differentiation"><i class="fa fa-check"></i><b>8.3.1</b> Calculating sliding window estimates of nucleotide diversity and differentiation<span></span></a></li>
<li class="chapter" data-level="8.3.2" data-path="setting-up-sliding-windows.html"><a href="setting-up-sliding-windows.html#sparrow-data"><i class="fa fa-check"></i><b>8.3.2</b> Extracting statistics for visualisation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="sparrow-viz.html"><a href="sparrow-viz.html"><i class="fa fa-check"></i><b>8.4</b> Visualising the data<span></span></a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="sparrow-viz.html"><a href="sparrow-viz.html#visualising-patterns-along-the-chromosome"><i class="fa fa-check"></i><b>8.4.1</b> Visualising patterns along the chromosome<span></span></a></li>
<li class="chapter" data-level="8.4.2" data-path="sparrow-viz.html"><a href="sparrow-viz.html#interlude-relative-vs.-absolute-measures-of-nucleotide-diversity"><i class="fa fa-check"></i><b>8.4.2</b> Interlude: relative vs. absolute measures of nucleotide diversity<span></span></a></li>
<li class="chapter" data-level="8.4.3" data-path="sparrow-viz.html"><a href="sparrow-viz.html#investigating-recombination-rate-variation"><i class="fa fa-check"></i><b>8.4.3</b> Investigating recombination rate variation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="study-questions-6.html"><a href="study-questions-6.html"><i class="fa fa-check"></i><b>8.5</b> Study questions<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="going-further-7.html"><a href="going-further-7.html"><i class="fa fa-check"></i><b>8.6</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch09.html"><a href="ch09.html"><i class="fa fa-check"></i><b>9</b> Reconstructing the Past<span></span></a>
<ul>
<li><a href="ch09.html#what-to-expect-8">What to expect<span></span></a></li>
<li><a href="ch09.html#getting-started-5">Getting started<span></span></a></li>
<li class="chapter" data-level="9.1" data-path="phylogenetics-in-r.html"><a href="phylogenetics-in-r.html"><i class="fa fa-check"></i><b>9.1</b> Phylogenetics in R<span></span></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="phylogenetics-in-r.html"><a href="phylogenetics-in-r.html#storing-trees-in-r"><i class="fa fa-check"></i><b>9.1.1</b> Storing trees in R<span></span></a></li>
<li class="chapter" data-level="9.1.2" data-path="phylogenetics-in-r.html"><a href="phylogenetics-in-r.html#plotting-trees"><i class="fa fa-check"></i><b>9.1.2</b> Plotting trees<span></span></a></li>
<li class="chapter" data-level="9.1.3" data-path="phylogenetics-in-r.html"><a href="phylogenetics-in-r.html#a-simple-example-with-real-data---avian-phylogenetics"><i class="fa fa-check"></i><b>9.1.3</b> A simple example with real data - avian phylogenetics<span></span></a></li>
<li class="chapter" data-level="9.1.4" data-path="phylogenetics-in-r.html"><a href="phylogenetics-in-r.html#constructing-trees-with-r"><i class="fa fa-check"></i><b>9.1.4</b> Constructing trees with R<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="population-structure.html"><a href="population-structure.html"><i class="fa fa-check"></i><b>9.2</b> Population structure<span></span></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="population-structure.html"><a href="population-structure.html#village-dogs-as-an-insight-to-dog-domestication"><i class="fa fa-check"></i><b>9.2.1</b> Village dogs as an insight to dog domestication<span></span></a></li>
<li class="chapter" data-level="9.2.2" data-path="population-structure.html"><a href="population-structure.html#reading-the-data-into-r"><i class="fa fa-check"></i><b>9.2.2</b> Reading the data into R<span></span></a></li>
<li class="chapter" data-level="9.2.3" data-path="population-structure.html"><a href="population-structure.html#performing-a-pca"><i class="fa fa-check"></i><b>9.2.3</b> Performing a PCA<span></span></a></li>
<li class="chapter" data-level="9.2.4" data-path="population-structure.html"><a href="population-structure.html#visualising-the-pca"><i class="fa fa-check"></i><b>9.2.4</b> Visualising the PCA<span></span></a></li>
<li class="chapter" data-level="9.2.5" data-path="population-structure.html"><a href="population-structure.html#eigenvalues"><i class="fa fa-check"></i><b>9.2.5</b> Eigenvalues<span></span></a></li>
<li class="chapter" data-level="9.2.6" data-path="population-structure.html"><a href="population-structure.html#the-full-data-set"><i class="fa fa-check"></i><b>9.2.6</b> The full data set<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="study-questions-7.html"><a href="study-questions-7.html"><i class="fa fa-check"></i><b>9.3</b> Study questions<span></span></a></li>
<li class="chapter" data-level="9.4" data-path="going-further-8.html"><a href="going-further-8.html"><i class="fa fa-check"></i><b>9.4</b> Going further<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch10.html"><a href="ch10.html"><i class="fa fa-check"></i><b>10</b> Advancing Further in R<span></span></a>
<ul>
<li><a href="ch10.html#what-to-expect-9">What to expect<span></span></a></li>
<li><a href="ch10.html#getting-started-6">Getting started<span></span></a></li>
<li class="chapter" data-level="10.1" data-path="advanced-features-of-rstudio.html"><a href="advanced-features-of-rstudio.html"><i class="fa fa-check"></i><b>10.1</b> Advanced features of RStudio<span></span></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="advanced-features-of-rstudio.html"><a href="advanced-features-of-rstudio.html#projects-projects-projects"><i class="fa fa-check"></i><b>10.1.1</b> Projects, projects, projects<span></span></a></li>
<li class="chapter" data-level="10.1.2" data-path="advanced-features-of-rstudio.html"><a href="advanced-features-of-rstudio.html#everyone-has-a-history"><i class="fa fa-check"></i><b>10.1.2</b> Everyone has a history<span></span></a></li>
<li class="chapter" data-level="10.1.3" data-path="advanced-features-of-rstudio.html"><a href="advanced-features-of-rstudio.html#tab-complete-and-other-hotkeys"><i class="fa fa-check"></i><b>10.1.3</b> Tab complete and other hotkeys<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="more-on-data-handling-categorising-and-joining.html"><a href="more-on-data-handling-categorising-and-joining.html"><i class="fa fa-check"></i><b>10.2</b> More on data handling: categorising and joining<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="more-on-data-handling-categorising-and-joining.html"><a href="more-on-data-handling-categorising-and-joining.html#ifelse-for-making-categories"><i class="fa fa-check"></i><b>10.2.1</b> <code>ifelse()</code> for making categories<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="more-on-data-handling-categorising-and-joining.html"><a href="more-on-data-handling-categorising-and-joining.html#joining"><i class="fa fa-check"></i><b>10.2.2</b> Joining<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>10.3</b> Lists<span></span></a></li>
<li class="chapter" data-level="10.4" data-path="vectorisation2.html"><a href="vectorisation2.html"><i class="fa fa-check"></i><b>10.4</b> Vectorisation<span></span></a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="vectorisation2.html"><a href="vectorisation2.html#using-lapply-to-vectorise"><i class="fa fa-check"></i><b>10.4.1</b> Using <code>lapply()</code> to vectorise<span></span></a></li>
<li class="chapter" data-level="10.4.2" data-path="vectorisation2.html"><a href="vectorisation2.html#sapply"><i class="fa fa-check"></i><b>10.4.2</b> <code>sapply()</code><span></span></a></li>
<li class="chapter" data-level="10.4.3" data-path="vectorisation2.html"><a href="vectorisation2.html#anonymous-functions"><i class="fa fa-check"></i><b>10.4.3</b> Anonymous functions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="concluding-remarks.html"><a href="concluding-remarks.html"><i class="fa fa-check"></i><b>10.5</b> Concluding remarks<span></span></a></li>
<li class="chapter" data-level="10.6" data-path="study-questions-8.html"><a href="study-questions-8.html"><i class="fa fa-check"></i><b>10.6</b> Study questions<span></span></a></li>
<li class="chapter" data-level="10.7" data-path="going-further-9.html"><a href="going-further-9.html"><i class="fa fa-check"></i><b>10.7</b> Going further<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Assignments<span></span></b></span></li>
<li><a href="w01.html#w01">Week 1-2 assignment<span></span></a></li>
<li><a href="w03.html#w03">Week 3 Assignment<span></span></a></li>
<li><a href="w04.html#w04">Week 4 assignment<span></span></a></li>
<li><a href="w05.html#w05">Week 5 assignment<span></span></a></li>
<li><a href="w06.html#w06">Week 6 assignment<span></span></a></li>
<li><a href="w07.html#w07">Week 7 assignment<span></span></a></li>
<li><a href="w08.html#w08">Week 8 assignment<span></span></a></li>
<li><a href="w09.html#w09">Week 9 assignment<span></span></a></li>
<li><a href="w10.html#w10">Week 10 assignment<span></span></a></li>
<li class="appendix"><span><b>Appendix<span></span></b></span></li>
<li class="chapter" data-level="A" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>A</b> About assignments and RMarkdown<span></span></a>
<ul>
<li><a href="rmarkdown.html#r-markdown">R Markdown<span></span></a></li>
<li><a href="rmarkdown.html#getting-started-7">Getting started<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Made with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R tutorials for the course BIOS1140 at the University of Oslo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="more-on-data-handling-categorising-and-joining" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> More on data handling: categorising and joining<a href="more-on-data-handling-categorising-and-joining.html#more-on-data-handling-categorising-and-joining" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<script src="js/hideOutput.js"></script>
<p>Handling large amounts of data with few lines of code is one of R’s strong points. In this section we will show how you can use <code>ifelse()</code> and the <code>left_join()</code> function from dplyr to make categories and add information to your data</p>
<div id="ifelse-for-making-categories" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> <code>ifelse()</code> for making categories<a href="more-on-data-handling-categorising-and-joining.html#ifelse-for-making-categories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s first review what the <code>ifelse()</code> function does. As you learned back in <a href="vectorisation.html#ifelse">chapter 5</a>, <code>ifelse()</code> takes a logical statement, and returns something different depending on whether the condition is <code>TRUE</code> or <code>FALSE</code>:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="more-on-data-handling-categorising-and-joining.html#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make a small vector</span></span>
<span id="cb387-2"><a href="more-on-data-handling-categorising-and-joining.html#cb387-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">50</span>)</span>
<span id="cb387-3"><a href="more-on-data-handling-categorising-and-joining.html#cb387-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use ifelse to evaluate it</span></span>
<span id="cb387-4"><a href="more-on-data-handling-categorising-and-joining.html#cb387-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(y <span class="sc">&gt;</span> <span class="dv">25</span>, <span class="st">&quot;Greater than 25&quot;</span>, <span class="st">&quot;Not greater than 25&quot;</span>)</span></code></pre></div>
<p>This function can be extremely useful for creating new variables in datasets. Let’s return to the familiar <code>starwars</code> data from <code>dplyr</code> in order to use the function in this way.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="more-on-data-handling-categorising-and-joining.html#cb388-1" aria-hidden="true" tabindex="-1"></a>starwars</span>
<span id="cb388-2"><a href="more-on-data-handling-categorising-and-joining.html#cb388-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 87 × 14</span></span>
<span id="cb388-3"><a href="more-on-data-handling-categorising-and-joining.html#cb388-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    name     height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span id="cb388-4"><a href="more-on-data-handling-categorising-and-joining.html#cb388-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; </span></span>
<span id="cb388-5"><a href="more-on-data-handling-categorising-and-joining.html#cb388-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…</span></span>
<span id="cb388-6"><a href="more-on-data-handling-categorising-and-joining.html#cb388-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…</span></span>
<span id="cb388-7"><a href="more-on-data-handling-categorising-and-joining.html#cb388-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…</span></span>
<span id="cb388-8"><a href="more-on-data-handling-categorising-and-joining.html#cb388-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…</span></span>
<span id="cb388-9"><a href="more-on-data-handling-categorising-and-joining.html#cb388-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Leia Or…    150    49 brown      light      brown           19   fema… femin…</span></span>
<span id="cb388-10"><a href="more-on-data-handling-categorising-and-joining.html#cb388-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…</span></span>
<span id="cb388-11"><a href="more-on-data-handling-categorising-and-joining.html#cb388-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…</span></span>
<span id="cb388-12"><a href="more-on-data-handling-categorising-and-joining.html#cb388-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…</span></span>
<span id="cb388-13"><a href="more-on-data-handling-categorising-and-joining.html#cb388-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Biggs D…    183    84 black      light      brown           24   male  mascu…</span></span>
<span id="cb388-14"><a href="more-on-data-handling-categorising-and-joining.html#cb388-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…</span></span>
<span id="cb388-15"><a href="more-on-data-handling-categorising-and-joining.html#cb388-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,</span></span>
<span id="cb388-16"><a href="more-on-data-handling-categorising-and-joining.html#cb388-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></code></pre></div>
<p>Now we can take a look at the <code>starwars$species</code> vector. There are a lot of different species, so what if we wanted to create a vector that simply states whether an individual is a droid or not?</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="more-on-data-handling-categorising-and-joining.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if else to identify droids and non-droids</span></span>
<span id="cb389-2"><a href="more-on-data-handling-categorising-and-joining.html#cb389-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(starwars<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>, <span class="st">&quot;Droid&quot;</span>, <span class="st">&quot;Non-Droid&quot;</span>)</span></code></pre></div>
<p>This can be useful e.g. for comparing droids and non-droids in a plot or table. Say we want to label our species based on whether they are a droid, human or neither of the two. A useful thing with <code>ifelse()</code> is that the third argument can be <em>another</em> <code>ifelse()</code> function! So we can actually chain <code>ifelse()</code> commands like this:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="more-on-data-handling-categorising-and-joining.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(starwars<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>, <span class="st">&quot;Droid&quot;</span>, <span class="fu">ifelse</span>(starwars<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Human&quot;</span>, <span class="st">&quot;Human&quot;</span>, <span class="st">&quot;Neither human nor droid&quot;</span>))</span></code></pre></div>
<p>This is useful, but quickly becomes convoluted. Imagine how the code would look if we threw in a third and fourth category there! In cases like this, remember to use linebreaks to make the code more readable. You can have a linebreak anywhere after starting a function, and R will still understand that it’s part of the same function. A suggestion for better formatting than above:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="more-on-data-handling-categorising-and-joining.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(</span>
<span id="cb391-2"><a href="more-on-data-handling-categorising-and-joining.html#cb391-2" aria-hidden="true" tabindex="-1"></a>  starwars<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>, <span class="st">&quot;Droid&quot;</span>, </span>
<span id="cb391-3"><a href="more-on-data-handling-categorising-and-joining.html#cb391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(</span>
<span id="cb391-4"><a href="more-on-data-handling-categorising-and-joining.html#cb391-4" aria-hidden="true" tabindex="-1"></a>    starwars<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Human&quot;</span>, <span class="st">&quot;Human&quot;</span>, </span>
<span id="cb391-5"><a href="more-on-data-handling-categorising-and-joining.html#cb391-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Neither human nor droid&quot;</span></span>
<span id="cb391-6"><a href="more-on-data-handling-categorising-and-joining.html#cb391-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb391-7"><a href="more-on-data-handling-categorising-and-joining.html#cb391-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Still, if you have more than, say, four-five categories, this becomes difficult to read and time-consuming. For e.g. adding more information to a data frame, <em>joining</em> may be a better alternative, which we will go through next.</p>
</div>
<div id="joining" class="section level3 hasAnchor" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Joining<a href="more-on-data-handling-categorising-and-joining.html#joining" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For this section we will revisit the <a href="https://BIOS1140.github.io/data/copepods.txt">copepods.txt</a> data that we encountered way back in <a href="#w02">week 2</a>. Start by reading in this data. You should know enough by now to do this by yourself, so we won’t show you how.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="more-on-data-handling-categorising-and-joining.html#cb392-1" aria-hidden="true" tabindex="-1"></a>copepods</span>
<span id="cb392-2"><a href="more-on-data-handling-categorising-and-joining.html#cb392-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   depth acartia calanus harpacticoida oithona oncaea temora</span></span>
<span id="cb392-3"><a href="more-on-data-handling-categorising-and-joining.html#cb392-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0       0       3             0       2      0      0</span></span>
<span id="cb392-4"><a href="more-on-data-handling-categorising-and-joining.html#cb392-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2       1       0             0       6      1      0</span></span>
<span id="cb392-5"><a href="more-on-data-handling-categorising-and-joining.html#cb392-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     4       1       0             0       7      0      1</span></span>
<span id="cb392-6"><a href="more-on-data-handling-categorising-and-joining.html#cb392-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     6      27       0             1       0      0      2</span></span>
<span id="cb392-7"><a href="more-on-data-handling-categorising-and-joining.html#cb392-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     8      11       0             2       6      0      3</span></span>
<span id="cb392-8"><a href="more-on-data-handling-categorising-and-joining.html#cb392-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    10      17       0             3       0      0      2</span></span>
<span id="cb392-9"><a href="more-on-data-handling-categorising-and-joining.html#cb392-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    12      13       0             1       0      0      1</span></span>
<span id="cb392-10"><a href="more-on-data-handling-categorising-and-joining.html#cb392-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    14       7       0            13       0      0      0</span></span>
<span id="cb392-11"><a href="more-on-data-handling-categorising-and-joining.html#cb392-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    16       6       0             6       0      0      1</span></span></code></pre></div>
<p>Next, we use <code>pivot_longer()</code> to get all taxa in a single column, i.e., convert to long format. See if you manage to do this yourself before looking at my code below.</p>
<div class="fold c">
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="more-on-data-handling-categorising-and-joining.html#cb393-1" aria-hidden="true" tabindex="-1"></a>copepods_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(copepods, </span>
<span id="cb393-2"><a href="more-on-data-handling-categorising-and-joining.html#cb393-2" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">-</span>depth, </span>
<span id="cb393-3"><a href="more-on-data-handling-categorising-and-joining.html#cb393-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">names_to =</span> <span class="st">&quot;taxon&quot;</span>, </span>
<span id="cb393-4"><a href="more-on-data-handling-categorising-and-joining.html#cb393-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
</div>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="more-on-data-handling-categorising-and-joining.html#cb394-1" aria-hidden="true" tabindex="-1"></a>copepods_long</span>
<span id="cb394-2"><a href="more-on-data-handling-categorising-and-joining.html#cb394-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 54 × 3</span></span>
<span id="cb394-3"><a href="more-on-data-handling-categorising-and-joining.html#cb394-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    depth taxon         count</span></span>
<span id="cb394-4"><a href="more-on-data-handling-categorising-and-joining.html#cb394-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;         &lt;int&gt;</span></span>
<span id="cb394-5"><a href="more-on-data-handling-categorising-and-joining.html#cb394-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     0 acartia           0</span></span>
<span id="cb394-6"><a href="more-on-data-handling-categorising-and-joining.html#cb394-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     0 calanus           3</span></span>
<span id="cb394-7"><a href="more-on-data-handling-categorising-and-joining.html#cb394-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     0 harpacticoida     0</span></span>
<span id="cb394-8"><a href="more-on-data-handling-categorising-and-joining.html#cb394-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     0 oithona           2</span></span>
<span id="cb394-9"><a href="more-on-data-handling-categorising-and-joining.html#cb394-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     0 oncaea            0</span></span>
<span id="cb394-10"><a href="more-on-data-handling-categorising-and-joining.html#cb394-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     0 temora            0</span></span>
<span id="cb394-11"><a href="more-on-data-handling-categorising-and-joining.html#cb394-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     2 acartia           1</span></span>
<span id="cb394-12"><a href="more-on-data-handling-categorising-and-joining.html#cb394-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     2 calanus           0</span></span>
<span id="cb394-13"><a href="more-on-data-handling-categorising-and-joining.html#cb394-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     2 harpacticoida     0</span></span>
<span id="cb394-14"><a href="more-on-data-handling-categorising-and-joining.html#cb394-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     2 oithona           6</span></span>
<span id="cb394-15"><a href="more-on-data-handling-categorising-and-joining.html#cb394-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 44 more rows</span></span></code></pre></div>
<p>Now, say that you have recorded the temperature at each depth, and want to add that information to your copepod data. How would you go about doing that? First, here is the data in a data frame:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="more-on-data-handling-categorising-and-joining.html#cb395-1" aria-hidden="true" tabindex="-1"></a>temps <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb395-2"><a href="more-on-data-handling-categorising-and-joining.html#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">depth =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">14</span>,<span class="dv">16</span>),</span>
<span id="cb395-3"><a href="more-on-data-handling-categorising-and-joining.html#cb395-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">temp =</span> <span class="fu">c</span>(<span class="fl">15.5</span>, <span class="fl">15.4</span>, <span class="fl">15.2</span>, <span class="fl">14.7</span>, <span class="fl">11.4</span>, <span class="fl">8.3</span>, <span class="fl">7.6</span>, <span class="fl">7.0</span>, <span class="fl">6.8</span>)</span>
<span id="cb395-4"><a href="more-on-data-handling-categorising-and-joining.html#cb395-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb395-5"><a href="more-on-data-handling-categorising-and-joining.html#cb395-5" aria-hidden="true" tabindex="-1"></a>temps</span>
<span id="cb395-6"><a href="more-on-data-handling-categorising-and-joining.html#cb395-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   depth temp</span></span>
<span id="cb395-7"><a href="more-on-data-handling-categorising-and-joining.html#cb395-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0 15.5</span></span>
<span id="cb395-8"><a href="more-on-data-handling-categorising-and-joining.html#cb395-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2 15.4</span></span>
<span id="cb395-9"><a href="more-on-data-handling-categorising-and-joining.html#cb395-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     4 15.2</span></span>
<span id="cb395-10"><a href="more-on-data-handling-categorising-and-joining.html#cb395-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     6 14.7</span></span>
<span id="cb395-11"><a href="more-on-data-handling-categorising-and-joining.html#cb395-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     8 11.4</span></span>
<span id="cb395-12"><a href="more-on-data-handling-categorising-and-joining.html#cb395-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    10  8.3</span></span>
<span id="cb395-13"><a href="more-on-data-handling-categorising-and-joining.html#cb395-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    12  7.6</span></span>
<span id="cb395-14"><a href="more-on-data-handling-categorising-and-joining.html#cb395-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    14  7.0</span></span>
<span id="cb395-15"><a href="more-on-data-handling-categorising-and-joining.html#cb395-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    16  6.8</span></span></code></pre></div>
<p>One way would be using nested <code>ifelse()</code> functions, like we learned in the previous section. This is a lot of work and doesn’t look good, but it’s written it out below just to show you it’s possible:</p>
<div class="fold c">
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="more-on-data-handling-categorising-and-joining.html#cb396-1" aria-hidden="true" tabindex="-1"></a>copepods_long<span class="sc">$</span>depthtemp <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(</span>
<span id="cb396-2"><a href="more-on-data-handling-categorising-and-joining.html#cb396-2" aria-hidden="true" tabindex="-1"></a>  copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">0</span>, <span class="fl">15.5</span>,</span>
<span id="cb396-3"><a href="more-on-data-handling-categorising-and-joining.html#cb396-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(</span>
<span id="cb396-4"><a href="more-on-data-handling-categorising-and-joining.html#cb396-4" aria-hidden="true" tabindex="-1"></a>    copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">2</span>, <span class="fl">15.4</span>,</span>
<span id="cb396-5"><a href="more-on-data-handling-categorising-and-joining.html#cb396-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(</span>
<span id="cb396-6"><a href="more-on-data-handling-categorising-and-joining.html#cb396-6" aria-hidden="true" tabindex="-1"></a>      copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">4</span>, <span class="fl">15.2</span>,</span>
<span id="cb396-7"><a href="more-on-data-handling-categorising-and-joining.html#cb396-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(</span>
<span id="cb396-8"><a href="more-on-data-handling-categorising-and-joining.html#cb396-8" aria-hidden="true" tabindex="-1"></a>        copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">6</span>, <span class="fl">14.7</span>,</span>
<span id="cb396-9"><a href="more-on-data-handling-categorising-and-joining.html#cb396-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ifelse</span>(</span>
<span id="cb396-10"><a href="more-on-data-handling-categorising-and-joining.html#cb396-10" aria-hidden="true" tabindex="-1"></a>          copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">8</span>, <span class="fl">11.4</span>,</span>
<span id="cb396-11"><a href="more-on-data-handling-categorising-and-joining.html#cb396-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ifelse</span>(</span>
<span id="cb396-12"><a href="more-on-data-handling-categorising-and-joining.html#cb396-12" aria-hidden="true" tabindex="-1"></a>            copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">10</span>, <span class="fl">8.3</span>,</span>
<span id="cb396-13"><a href="more-on-data-handling-categorising-and-joining.html#cb396-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ifelse</span>(</span>
<span id="cb396-14"><a href="more-on-data-handling-categorising-and-joining.html#cb396-14" aria-hidden="true" tabindex="-1"></a>              copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">12</span>, <span class="fl">7.6</span>,</span>
<span id="cb396-15"><a href="more-on-data-handling-categorising-and-joining.html#cb396-15" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ifelse</span>(</span>
<span id="cb396-16"><a href="more-on-data-handling-categorising-and-joining.html#cb396-16" aria-hidden="true" tabindex="-1"></a>                copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">14</span>, <span class="fl">7.0</span>,</span>
<span id="cb396-17"><a href="more-on-data-handling-categorising-and-joining.html#cb396-17" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(</span>
<span id="cb396-18"><a href="more-on-data-handling-categorising-and-joining.html#cb396-18" aria-hidden="true" tabindex="-1"></a>                  copepods_long<span class="sc">$</span>depth <span class="sc">==</span> <span class="dv">16</span>, <span class="fl">6.8</span>,</span>
<span id="cb396-19"><a href="more-on-data-handling-categorising-and-joining.html#cb396-19" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">NA</span></span>
<span id="cb396-20"><a href="more-on-data-handling-categorising-and-joining.html#cb396-20" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb396-21"><a href="more-on-data-handling-categorising-and-joining.html#cb396-21" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb396-22"><a href="more-on-data-handling-categorising-and-joining.html#cb396-22" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb396-23"><a href="more-on-data-handling-categorising-and-joining.html#cb396-23" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb396-24"><a href="more-on-data-handling-categorising-and-joining.html#cb396-24" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb396-25"><a href="more-on-data-handling-categorising-and-joining.html#cb396-25" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb396-26"><a href="more-on-data-handling-categorising-and-joining.html#cb396-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb396-27"><a href="more-on-data-handling-categorising-and-joining.html#cb396-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb396-28"><a href="more-on-data-handling-categorising-and-joining.html#cb396-28" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<p>Instead, you can use the <code>left_join()</code> function from <code>dplyr</code>. You have to supply it the original data, the data you want to join with, and a vector of column names to join by (here “depth”).</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="more-on-data-handling-categorising-and-joining.html#cb397-1" aria-hidden="true" tabindex="-1"></a>copepods_temp <span class="ot">&lt;-</span> <span class="fu">left_join</span>(copepods_long, temps, <span class="at">by =</span> <span class="st">&quot;depth&quot;</span>)</span>
<span id="cb397-2"><a href="more-on-data-handling-categorising-and-joining.html#cb397-2" aria-hidden="true" tabindex="-1"></a>copepods_temp</span>
<span id="cb397-3"><a href="more-on-data-handling-categorising-and-joining.html#cb397-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 54 × 5</span></span>
<span id="cb397-4"><a href="more-on-data-handling-categorising-and-joining.html#cb397-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    depth taxon         count depthtemp  temp</span></span>
<span id="cb397-5"><a href="more-on-data-handling-categorising-and-joining.html#cb397-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;         &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb397-6"><a href="more-on-data-handling-categorising-and-joining.html#cb397-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     0 acartia           0      15.5  15.5</span></span>
<span id="cb397-7"><a href="more-on-data-handling-categorising-and-joining.html#cb397-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     0 calanus           3      15.5  15.5</span></span>
<span id="cb397-8"><a href="more-on-data-handling-categorising-and-joining.html#cb397-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     0 harpacticoida     0      15.5  15.5</span></span>
<span id="cb397-9"><a href="more-on-data-handling-categorising-and-joining.html#cb397-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     0 oithona           2      15.5  15.5</span></span>
<span id="cb397-10"><a href="more-on-data-handling-categorising-and-joining.html#cb397-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     0 oncaea            0      15.5  15.5</span></span>
<span id="cb397-11"><a href="more-on-data-handling-categorising-and-joining.html#cb397-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     0 temora            0      15.5  15.5</span></span>
<span id="cb397-12"><a href="more-on-data-handling-categorising-and-joining.html#cb397-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     2 acartia           1      15.4  15.4</span></span>
<span id="cb397-13"><a href="more-on-data-handling-categorising-and-joining.html#cb397-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     2 calanus           0      15.4  15.4</span></span>
<span id="cb397-14"><a href="more-on-data-handling-categorising-and-joining.html#cb397-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     2 harpacticoida     0      15.4  15.4</span></span>
<span id="cb397-15"><a href="more-on-data-handling-categorising-and-joining.html#cb397-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     2 oithona           6      15.4  15.4</span></span>
<span id="cb397-16"><a href="more-on-data-handling-categorising-and-joining.html#cb397-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 44 more rows</span></span></code></pre></div>
<p><code>left_join()</code> matches one or more columns in your two data sets, and add rows from the second data set into the first data set in the correct place. You see that the <code>temp</code> column is equal to the <code>depthtemp</code> we created earlier, but it’s so much easier to work with! Keep in mind that it is this simple in our case because <code>depth</code> has the exact same name in both data frames. Remember this when recording data in the future!</p>
<div class="green">
<p><strong>Important concept:</strong><br />
If you have your data spread out over multiple files, remember to name columns appropriately. All columns that contain the same kind of data should have the <em>exact same name</em> across all data sets. Similarly, the data should be entered in the same way in both data sets (e.g., don’t record depth as “2” in one data set and “2m” in the other). If you do this, you can easily join data sets with the <code>left_join()</code> function.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="advanced-features-of-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lists.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
